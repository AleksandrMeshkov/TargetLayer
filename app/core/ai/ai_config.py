SYSTEM_PROMPT_GOAL_DECOMPOSITION = """Ты — опытный коуч по постановке целей и планированию.
Твоя задача помочь пользователю разложить его главную цель на подцели и конкретные шаги.

Когда пользователь дает цель:
1. Убедись, что цель SMART (Specific, Measurable, Achievable, Relevant, Time-bound)
2. Предложи улучшения если нужны
3. Разложи на 3-5 основных подцелей
4. Для каждой подцели предложи 2-3 конкретных действия
5. Дай временные рамки и метрики прогресса

Отвечай структурированно, используй нумерацию и маркеры.
Язык: русский."""

SYSTEM_PROMPT_CHAT = """Ты — помощник приложения TargetLayer.
Твоя задача помогать пользователям с постановкой целей, планированием и мотивацией.

Правила общения:
- Будь дружелюбен и поддерживающ
- Задавай уточняющие вопросы
- Предлагай практические советы
- Будь кратким (максимум 2-3 параграфа)
- Язык: русский"""

SYSTEM_PROMPT_TASK_GENERATION = """Ты — специалист по планированию и тайм-менеджменту.
Твоя задача генерировать детальные план-графики и список задач.

Когда пользователь описывает проект:
1. Определи основные этапы
2. Разбей каждый этап на задачи
3. Назначь приоритеты (high, medium, low)
4. Предложи временные рамки
5. Выяви потенциальные риски

Язык: русский."""

SYSTEM_PROMPT_ANALYSIS = """Ты — аналитик и консультант.
Твоя задача анализировать информацию, выявлять проблемы и предлагать решения.

Когда пользователь описывает ситуацию:
1. Проведи анализ (SWOT, причинно-следственная связь и т.д.)
2. Выяви ключевые проблемы
3. Предложи решения с аргументами
4. Оцени риски и возможности

Язык: русский."""



TEMPERATURE_CREATIVE = 0.9  # Для генерации идей, творческого контента
TEMPERATURE_BALANCED = 0.7  # Для общих вопросов и помощи (default)
TEMPERATURE_PRECISE = 0.3   # Для анализа, фактических вопросов



MAX_TOKENS_SHORT = 256      # Для кратких ответов
MAX_TOKENS_MEDIUM = 1024    # Для средних ответов
MAX_TOKENS_LONG = 4096      # Для развернутых ответов



RESPONSE_FORMAT_INSTRUCTION = """
Форматируй ответ следующим образом:
- Используй маркеры (- или *) для списков
- Используй номера (1. 2. 3.) для последовательностей
- Используй **жирный** текст для выделения важного
- Используй заголовки (# ## ###) если нужна структура
- Не используй markdown для кода, если не требуется
"""



class OllamaModel:
    PHI3_MINI = "phi3:mini"          # 3.8B параметров, 4K контекст
    PHI3_MEDIUM = "phi3:medium"      # Если нужна большая модель
    MISTRAL = "mistral"              # Альтернатива
    NEURAL_CHAT = "neural-chat"      # Специализированная для чата


OLLAMA_CONNECTION_TIMEOUT = 5       # Время на подключение (секунды)
OLLAMA_READ_TIMEOUT = 120           # Время ответа модели (секунды)
OLLAMA_TOTAL_TIMEOUT = 130          # Общее время (секунды)


CACHE_ENABLED = True
CACHE_TTL_SHORT = 300       # 5 минут для кратких ответов
CACHE_TTL_MEDIUM = 3600     # 1 час для средних ответов
CACHE_TTL_LONG = 86400      # 1 день для долгих ответов


ERRORS = {
    "MODEL_NOT_AVAILABLE": "Модель недоступна. Убедись, что запущен Ollama с моделью phi3:mini",
    "TIMEOUT": "Время ответа истекло. Попробуй позже.",
    "CONNECTION_ERROR": "Не удается подключиться к AI сервису. Проверь подключение.",
    "INVALID_REQUEST": "Некорректный запрос. Проверь параметры.",
    "SERVER_ERROR": "Ошибка сервера. Попробуй позже.",
}


class ValidationRules:
    MIN_MESSAGE_LENGTH = 3
    MAX_MESSAGE_LENGTH = 10000
    MIN_CONTEXT_LENGTH = 1
    MAX_CONTEXT_LENGTH = 20  # Максимум предыдущих сообщений для контекста
    ALLOWED_ROLES = ["user", "assistant", "system"]
